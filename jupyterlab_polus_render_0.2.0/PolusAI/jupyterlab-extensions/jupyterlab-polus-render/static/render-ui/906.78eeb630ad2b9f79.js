"use strict";(self.webpackChunkrender_ui=self.webpackChunkrender_ui||[]).push([[906],{1906:(he,ee,Q)=>{Q.r(ee),Q.d(ee,{default:()=>le});var oe=Q(605);const U=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),V=4017,_=799,G=3406,X=2276,Z=1567,z=3784,M=5793,W=2896;function ne(q,l){let o=0;const u=[];let T=16;for(;T>0&&!q[T-1];)--T;u.push({children:[],index:0});let C,w=u[0];for(let t=0;t<T;t++){for(let h=0;h<q[t];h++){for(w=u.pop(),w.children[w.index]=l[o];w.index>0;)w=u.pop();for(w.index++,u.push(w);u.length<=t;)u.push(C={children:[],index:0}),w.children[w.index]=C.children,w=C;o++}t+1<T&&(u.push(C={children:[],index:0}),w.children[w.index]=C.children,w=C)}return u[0].children}function re(q,l,o,u,T,w,C,t,h){const{mcusPerLine:F,progressive:c}=o,r=l;let d=l,i=0,b=0;function m(){if(b>0)return b--,i>>b&1;if(i=q[d++],255===i){const a=q[d++];if(a)throw new Error(`unexpected marker: ${(i<<8|a).toString(16)}`)}return b=7,i>>>7}function x(a){let p,f=a;for(;null!==(p=m());){if(f=f[p],"number"==typeof f)return f;if("object"!=typeof f)throw new Error("invalid huffman sequence")}return null}function E(a){let f=a,p=0;for(;f>0;){const L=m();if(null===L)return;p=p<<1|L,--f}return p}function k(a){const f=E(a);return f>=1<<a-1?f:f+(-1<<a)+1}let te,n=0,e=0;function fe(a,f,p,L,v){f(a,a.blocks[(p/F|0)*a.v+L][p%F*a.h+v])}const Y=u.length;let O,j,$,K,R,H;H=c?0===w?0===t?function P(a,f){const p=x(a.huffmanTableDC),L=0===p?0:k(p)<<h;a.pred+=L,f[0]=a.pred}:function s(a,f){f[0]|=m()<<h}:0===t?function g(a,f){if(n>0)return void n--;let p=w;const L=C;for(;p<=L;){const v=x(a.huffmanTableAC),D=15&v,y=v>>4;if(0===D){if(y<15){n=E(y)+(1<<y)-1;break}p+=16}else p+=y,f[U[p]]=k(D)*(1<<h),p++}}:function ae(a,f){let p=w;const L=C;let v=0;for(;p<=L;){const D=U[p],y=f[D]<0?-1:1;switch(e){case 0:{const S=x(a.huffmanTableAC),I=15&S;if(v=S>>4,0===I)v<15?(n=E(v)+(1<<v),e=4):(v=16,e=1);else{if(1!==I)throw new Error("invalid ACn encoding");te=k(I),e=v?2:3}continue}case 1:case 2:f[D]?f[D]+=(m()<<h)*y:(v--,0===v&&(e=2===e?3:0));break;case 3:f[D]?f[D]+=(m()<<h)*y:(f[D]=te<<h,e=0);break;case 4:f[D]&&(f[D]+=(m()<<h)*y)}p++}4===e&&(n--,0===n&&(e=0))}:function A(a,f){const p=x(a.huffmanTableDC),L=0===p?0:k(p);a.pred+=L,f[0]=a.pred;let v=1;for(;v<64;){const D=x(a.huffmanTableAC),y=15&D,S=D>>4;if(0===y){if(S<15)break;v+=16}else v+=S,f[U[v]]=k(y),v++}};let N,J,B=0;J=1===Y?u[0].blocksPerLine*u[0].blocksPerColumn:F*o.mcusPerColumn;const se=T||J;for(;B<J;){for(j=0;j<Y;j++)u[j].pred=0;if(n=0,1===Y)for(O=u[0],R=0;R<se;R++)H(a=O,a.blocks[(p=B)/a.blocksPerLine|0][p%a.blocksPerLine]),B++;else for(R=0;R<se;R++){for(j=0;j<Y;j++){O=u[j];const{h:a,v:f}=O;for($=0;$<f;$++)for(K=0;K<a;K++)fe(O,H,B,$,K)}if(B++,B===J)break}if(b=0,N=q[d]<<8|q[d+1],N<65280)throw new Error("marker was not found");if(!(N>=65488&&N<=65495))break;d+=2}var a,p;return d-r}function ce(q,l){const o=[],{blocksPerLine:u,blocksPerColumn:T}=l,w=u<<3,C=new Int32Array(64),t=new Uint8Array(64);function h(F,c,r){const d=l.quantizationTable;let i,b,m,x,E,k,A,P,s;const n=r;let g;for(g=0;g<64;g++)n[g]=F[g]*d[g];for(g=0;g<8;++g){const e=8*g;0!==n[1+e]||0!==n[2+e]||0!==n[3+e]||0!==n[4+e]||0!==n[5+e]||0!==n[6+e]||0!==n[7+e]?(i=M*n[0+e]+128>>8,b=M*n[4+e]+128>>8,m=n[2+e],x=n[6+e],E=W*(n[1+e]-n[7+e])+128>>8,P=W*(n[1+e]+n[7+e])+128>>8,k=n[3+e]<<4,A=n[5+e]<<4,s=i-b+1>>1,i=i+b+1>>1,b=s,s=m*z+x*Z+128>>8,m=m*Z-x*z+128>>8,x=s,s=E-A+1>>1,E=E+A+1>>1,A=s,s=P+k+1>>1,k=P-k+1>>1,P=s,s=i-x+1>>1,i=i+x+1>>1,x=s,s=b-m+1>>1,b=b+m+1>>1,m=s,s=E*X+P*G+2048>>12,E=E*G-P*X+2048>>12,P=s,s=k*_+A*V+2048>>12,k=k*V-A*_+2048>>12,A=s,n[0+e]=i+P,n[7+e]=i-P,n[1+e]=b+A,n[6+e]=b-A,n[2+e]=m+k,n[5+e]=m-k,n[3+e]=x+E,n[4+e]=x-E):(s=M*n[0+e]+512>>10,n[0+e]=s,n[1+e]=s,n[2+e]=s,n[3+e]=s,n[4+e]=s,n[5+e]=s,n[6+e]=s,n[7+e]=s)}for(g=0;g<8;++g){const e=g;0!==n[8+e]||0!==n[16+e]||0!==n[24+e]||0!==n[32+e]||0!==n[40+e]||0!==n[48+e]||0!==n[56+e]?(i=M*n[0+e]+2048>>12,b=M*n[32+e]+2048>>12,m=n[16+e],x=n[48+e],E=W*(n[8+e]-n[56+e])+2048>>12,P=W*(n[8+e]+n[56+e])+2048>>12,k=n[24+e],A=n[40+e],s=i-b+1>>1,i=i+b+1>>1,b=s,s=m*z+x*Z+2048>>12,m=m*Z-x*z+2048>>12,x=s,s=E-A+1>>1,E=E+A+1>>1,A=s,s=P+k+1>>1,k=P-k+1>>1,P=s,s=i-x+1>>1,i=i+x+1>>1,x=s,s=b-m+1>>1,b=b+m+1>>1,m=s,s=E*X+P*G+2048>>12,E=E*G-P*X+2048>>12,P=s,s=k*_+A*V+2048>>12,k=k*V-A*_+2048>>12,A=s,n[0+e]=i+P,n[56+e]=i-P,n[8+e]=b+A,n[48+e]=b-A,n[16+e]=m+k,n[40+e]=m-k,n[24+e]=x+E,n[32+e]=x-E):(s=M*r[g+0]+8192>>14,n[0+e]=s,n[8+e]=s,n[16+e]=s,n[24+e]=s,n[32+e]=s,n[40+e]=s,n[48+e]=s,n[56+e]=s)}for(g=0;g<64;++g){const e=128+(n[g]+8>>4);c[g]=e<0?0:e>255?255:e}}for(let F=0;F<T;F++){const c=F<<3;for(let r=0;r<8;r++)o.push(new Uint8Array(w));for(let r=0;r<u;r++){h(l.blocks[F][r],t,C);let d=0;const i=r<<3;for(let b=0;b<8;b++){const m=o[c+b];for(let x=0;x<8;x++)m[i+x]=t[d++]}}}return o}class ie{constructor(){this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()}resetFrames(){this.frames=[]}parse(l){let o=0;function u(){const t=l[o]<<8|l[o+1];return o+=2,t}function T(){const t=u(),h=l.subarray(o,o+t-2);return o+=h.length,h}function w(t){let c,r,h=0,F=0;for(r in t.components)t.components.hasOwnProperty(r)&&(c=t.components[r],h<c.h&&(h=c.h),F<c.v&&(F=c.v));const d=Math.ceil(t.samplesPerLine/8/h),i=Math.ceil(t.scanLines/8/F);for(r in t.components)if(t.components.hasOwnProperty(r)){c=t.components[r];const b=Math.ceil(Math.ceil(t.samplesPerLine/8)*c.h/h),m=Math.ceil(Math.ceil(t.scanLines/8)*c.v/F),x=d*c.h,E=i*c.v,k=[];for(let A=0;A<E;A++){const P=[];for(let s=0;s<x;s++)P.push(new Int32Array(64));k.push(P)}c.blocksPerLine=b,c.blocksPerColumn=m,c.blocks=k}t.maxH=h,t.maxV=F,t.mcusPerLine=d,t.mcusPerColumn=i}let C=u();if(65496!==C)throw new Error("SOI not found");for(C=u();65497!==C;){switch(C){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:{const t=T();65504===C&&74===t[0]&&70===t[1]&&73===t[2]&&70===t[3]&&0===t[4]&&(this.jfif={version:{major:t[5],minor:t[6]},densityUnits:t[7],xDensity:t[8]<<8|t[9],yDensity:t[10]<<8|t[11],thumbWidth:t[12],thumbHeight:t[13],thumbData:t.subarray(14,14+3*t[12]*t[13])}),65518===C&&65===t[0]&&100===t[1]&&111===t[2]&&98===t[3]&&101===t[4]&&0===t[5]&&(this.adobe={version:t[6],flags0:t[7]<<8|t[8],flags1:t[9]<<8|t[10],transformCode:t[11]});break}case 65499:{const h=u()+o-2;for(;o<h;){const F=l[o++],c=new Int32Array(64);if(F>>4==0)for(let r=0;r<64;r++)c[U[r]]=l[o++];else{if(F>>4!=1)throw new Error("DQT: invalid table spec");for(let r=0;r<64;r++)c[U[r]]=u()}this.quantizationTables[15&F]=c}break}case 65472:case 65473:case 65474:{u();const t={extended:65473===C,progressive:65474===C,precision:l[o++],scanLines:u(),samplesPerLine:u(),components:{},componentsOrder:[]},h=l[o++];let F;for(let c=0;c<h;c++){F=l[o];const r=l[o+1]>>4,d=15&l[o+1],i=l[o+2];t.componentsOrder.push(F),t.components[F]={h:r,v:d,quantizationIdx:i},o+=3}w(t),this.frames.push(t);break}case 65476:{const t=u();for(let h=2;h<t;){const F=l[o++],c=new Uint8Array(16);let r=0;for(let i=0;i<16;i++,o++)c[i]=l[o],r+=c[i];const d=new Uint8Array(r);for(let i=0;i<r;i++,o++)d[i]=l[o];h+=17+r,F>>4==0?this.huffmanTablesDC[15&F]=ne(c,d):this.huffmanTablesAC[15&F]=ne(c,d)}break}case 65501:u(),this.resetInterval=u();break;case 65498:{u();const t=l[o++],h=[],F=this.frames[0];for(let b=0;b<t;b++){const m=F.components[l[o++]],x=l[o++];m.huffmanTableDC=this.huffmanTablesDC[x>>4],m.huffmanTableAC=this.huffmanTablesAC[15&x],h.push(m)}const c=l[o++],r=l[o++],d=l[o++],i=re(l,o,F,h,this.resetInterval,c,r,d>>4,15&d);o+=i;break}case 65535:255!==l[o]&&o--;break;default:if(255===l[o-3]&&l[o-2]>=192&&l[o-2]<=254){o-=3;break}throw new Error(`unknown JPEG marker ${C.toString(16)}`)}C=u()}}getResult(){const{frames:l}=this;if(0===this.frames.length)throw new Error("no frames were decoded");this.frames.length>1&&console.warn("more than one frame is not supported");for(let c=0;c<this.frames.length;c++){const r=this.frames[c].components;for(const d of Object.keys(r))r[d].quantizationTable=this.quantizationTables[r[d].quantizationIdx],delete r[d].quantizationIdx}const o=l[0],{components:u,componentsOrder:T}=o,w=[],C=o.samplesPerLine,t=o.scanLines;for(let c=0;c<T.length;c++){const r=u[T[c]];w.push({lines:ce(0,r),scaleX:r.h/o.maxH,scaleY:r.v/o.maxV})}const h=new Uint8Array(C*t*w.length);let F=0;for(let c=0;c<t;++c)for(let r=0;r<C;++r)for(let d=0;d<w.length;++d){const i=w[d];h[F]=i.lines[0|c*i.scaleY][0|r*i.scaleX],++F}return h}}class le extends oe.Z{constructor(l){super(),this.reader=new ie,l.JPEGTables&&this.reader.parse(l.JPEGTables)}decodeBlock(l){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(l)),this.reader.getResult().buffer}}}}]);